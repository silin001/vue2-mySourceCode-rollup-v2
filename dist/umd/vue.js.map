{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observe/index.js","../../src/initState.js","../../src/init.js","../../src/index.js"],"sourcesContent":["// å·¥å…·ç±»æ–¹æ³•\r\n// å½“å‰æ•°æ®æ˜¯ä¸æ˜¯å¯¹è±¡ \r\nexport function isObject (data) {\r\n  return typeof data === 'object' && data !== null\r\n}","// å¯¹è±¡çš„æ•°æ®åŠ«æŒï¼\r\n// æŠŠdataä¸­çš„å¯¹è±¡æ•°æ®ä½¿ç”¨Object.defineProperty é‡æ–°å®šä¹‰ï¼Œ es5æ–¹æ³•\r\n// è¯¥æ–¹æ³•ä¸å…¼å®¹ie8 åŠä»¥ä¸‹ï¼Œ vue2 æ— æ³•å…¼å®¹ie8\r\nimport { isObject } from '../utils/index'\r\n\r\n// â­å®šä¹‰å“åº”å¼æ•°æ®\r\nfunction defineReactive (data, key, value) {\r\n  observe(value) //â­ é€’å½’å®ç°æ·±åº¦ç›‘æµ‹ï¼Œå±‚æ¬¡è¶Šæ·±è¶Šå·®\r\n  Object.defineProperty(data, key, {\r\n    get () {\r\n      return value\r\n    },\r\n    set (newVal) {\r\n      if (newVal === value) return\r\n      console.log('å€¼æ”¹å˜äº†')\r\n      observe(newVal)       // â­ç»§ç»­åŠ«æŒç”¨æˆ·è®¾ç½®çš„å€¼ï¼Œå› ä¸ºæœ‰å¯ä»¥ç”¨æˆ·è®¾ç½®çš„å€¼ä¸º{}\r\n      value = newVal\r\n    }\r\n  })\r\n}\r\n// è§‚å¯Ÿæ•°æ® ç±»\r\nclass Observer {\r\n  constructor(value) {\r\n    // vueå¦‚æœæ•°æ®çš„å±‚æ¬¡è¿‡å¤š éœ€è¦é€’å½’å»è§£æå¯¹è±¡ä¸­çš„å±æ€§,ä¾æ¬¡æ·»åŠ get, setæ–¹æ³•\r\n    this.walk(value)\r\n  }\r\n  walk (data) {\r\n    let keys = Object.keys(data) //è·å–data keyå€¼ [name,age,address]\r\n    console.log('ğŸš€ğŸš€ ~ file: index.js ~ line 11 ~ Observer ~ walk ~ keys', keys)\r\n    keys.forEach((key) => {\r\n      defineReactive(data, key, data[key]) // å®šä¹‰å“åº”å¼æ•°æ®\r\n    })\r\n    // for (let index = 0; index < keys.length; index++) {\r\n    //   const key = keys[index]\r\n    //   const value = data[key]\r\n    // defineReactive(data, key, value]) // å®šä¹‰å“åº”å¼æ•°æ®\r\n    // }\r\n  }\r\n}\r\n\r\n\r\nexport function observe (data) {\r\n  console.log(data, 'observe')\r\n  const isObj = isObject(data)\r\n  if (!isObj) return\r\n  return new Observer(data)  // ç”¨æ¥è§‚æµ‹æ•°æ®\r\n}","import { observe } from './observe/index'\r\nexport function initState (vm) {\r\n  const opts = vm.$options\r\n  // vue çš„æ•°æ®æ¥æº å±æ€§ æ–¹æ³•  æ•°æ® è®¡ç®—å±æ€§ watch\r\n  // console.log(opts)\r\n  if (opts.props) {\r\n    initProps(vm)\r\n  }\r\n  if (opts.methods) {\r\n    initMethods(vm)\r\n  }\r\n  if (opts.data) {\r\n    initData(vm)\r\n  }\r\n  if (opts.computed) {\r\n    initComputed(vm)\r\n  }\r\n  if (opts.watch) {\r\n    initWatch(vm)\r\n  }\r\n\r\n}\r\nfunction initProps (vm) {\r\n  // console.log('åˆå§‹åŒ–æ•°æ®', vm.$options.data)\r\n}\r\nfunction initMethods (vm) {\r\n  // console.log('åˆå§‹åŒ–æ•°æ®', vm.$options.data)\r\n}\r\nfunction initComputed (vm) {\r\n  // console.log('åˆå§‹åŒ–æ•°æ®', vm.$options.data)\r\n}\r\nfunction initData (vm) {\r\n  console.log('åˆå§‹åŒ–æ•°æ®', vm.$options.data)\r\n  // æ•°æ®åˆå§‹åŒ–å·¥ä½œ\r\n  let data = vm.$options.data\r\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\r\n  // å¯¹è±¡åŠ«æŒï¼Œç”¨æˆ·æ”¹å˜æ•°æ® æˆ‘å¸Œæœ›å¯ä»¥å¾—åˆ°é€šçŸ¥-åˆ·æ–°é¡µé¢\r\n  // mvvm æ¨¡å¼ æ•°æ®å˜åŒ–å¯ä»¥æ›´æ–°è§†å›¾\r\n  observe(data) // å“åº”å¼åŸç†\r\n}\r\n\r\nfunction initWatch (vm) {\r\n  console.log('åˆå§‹åŒ–æ•°æ®', vm.$options.data)\r\n}","import { initState } from './initState'\r\n// åœ¨åŸå‹ä¸Šæ·»åŠ ä¸€ä¸ªinitæ–¹æ³•\r\nexport function initMixin (Vue) {\r\n  // åˆå§‹åŒ–æµç¨‹\r\n  Vue.prototype._init = function (options) {\r\n    console.log(options)\r\n    // 1.åŠ«æŒæ•°æ®\r\n    const vm = this\r\n    console.log(vm)\r\n    vm.$options = options\r\n    // åˆå§‹åŒ–çŠ¶æ€\r\n    initState(vm)\r\n  }\r\n}","// vueæ ¸å¿ƒ åªæ˜¯vueçš„ä¸€ä¸ªå£°æ˜æ–‡ä»¶\r\nimport { initMixin } from './init'\r\n\r\n\r\nfunction Vue (options) {\r\n  //vue åˆå§‹åŒ–æ“ä½œ\r\n  this._init(options)\r\n}\r\n// é€šè¿‡å¼•å…¥æ–‡ä»¶æ–¹å¼ç»™vueåŸå‹æ·»åŠ æ–¹æ³•\r\ninitMixin(Vue) // ç»™vueåŸå‹æ·»åŠ _initæ–¹æ³•\r\nexport default Vue"],"names":[],"mappings":";;;;;;EAAA;EACA;EACO,SAAS,QAAQ,EAAE,IAAI,EAAE;EAChC,EAAE,OAAO,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,IAAI;EAClD;;ECJA;AAIA;EACA;EACA,SAAS,cAAc,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE;EAC3C,EAAE,OAAO,CAAC,KAAK,EAAC;EAChB,EAAE,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,GAAG,EAAE;EACnC,IAAI,GAAG,CAAC,GAAG;EACX,MAAM,OAAO,KAAK;EAClB,KAAK;EACL,IAAI,GAAG,CAAC,CAAC,MAAM,EAAE;EACjB,MAAM,IAAI,MAAM,KAAK,KAAK,EAAE,MAAM;EAClC,MAAM,OAAO,CAAC,GAAG,CAAC,MAAM,EAAC;EACzB,MAAM,OAAO,CAAC,MAAM,EAAC;EACrB,MAAM,KAAK,GAAG,OAAM;EACpB,KAAK;EACL,GAAG,EAAC;EACJ,CAAC;EACD;EACA,MAAM,QAAQ,CAAC;EACf,EAAE,WAAW,CAAC,KAAK,EAAE;EACrB;EACA,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,EAAC;EACpB,GAAG;EACH,EAAE,IAAI,CAAC,CAAC,IAAI,EAAE;EACd,IAAI,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,EAAC;EAChC,IAAI,OAAO,CAAC,GAAG,CAAC,0DAA0D,EAAE,IAAI,EAAC;EACjF,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,KAAK;EAC1B,MAAM,cAAc,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,EAAC;EAC1C,KAAK,EAAC;EACN;EACA;EACA;EACA;EACA;EACA,GAAG;EACH,CAAC;AACD;AACA;EACO,SAAS,OAAO,EAAE,IAAI,EAAE;EAC/B,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,EAAC;EAC9B,EAAE,MAAM,KAAK,GAAG,QAAQ,CAAC,IAAI,EAAC;EAC9B,EAAE,IAAI,CAAC,KAAK,EAAE,MAAM;EACpB,EAAE,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC;EAC3B;;EC7CO,SAAS,SAAS,EAAE,EAAE,EAAE;EAC/B,EAAE,MAAM,IAAI,GAAG,EAAE,CAAC,SAAQ;EAC1B;EACA;EACA,EAAE,IAAI,IAAI,CAAC,KAAK,EAAE,CAEf;EACH,EAAE,IAAI,IAAI,CAAC,OAAO,EAAE,CAEjB;EACH,EAAE,IAAI,IAAI,CAAC,IAAI,EAAE;EACjB,IAAI,QAAQ,CAAC,EAAE,EAAC;EAChB,GAAG;EACH,EAAE,IAAI,IAAI,CAAC,QAAQ,EAAE,CAElB;EACH,EAAE,IAAI,IAAI,CAAC,KAAK,EAAE;EAClB,IAAI,SAAS,CAAC,EAAE,EAAC;EACjB,GAAG;AACH;EACA,CAAC;EAUD,SAAS,QAAQ,EAAE,EAAE,EAAE;EACvB,EAAE,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAC;EACxC;EACA,EAAE,IAAI,IAAI,GAAG,EAAE,CAAC,QAAQ,CAAC,KAAI;EAC7B,EAAE,IAAI,GAAG,EAAE,CAAC,KAAK,GAAG,OAAO,IAAI,KAAK,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,KAAI;EACrE;EACA;EACA,EAAE,OAAO,CAAC,IAAI,EAAC;EACf,CAAC;AACD;EACA,SAAS,SAAS,EAAE,EAAE,EAAE;EACxB,EAAE,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAC;EACxC;;EC1CA;EACO,SAAS,SAAS,EAAE,GAAG,EAAE;EAChC;EACA,EAAE,GAAG,CAAC,SAAS,CAAC,KAAK,GAAG,UAAU,OAAO,EAAE;EAC3C,IAAI,OAAO,CAAC,GAAG,CAAC,OAAO,EAAC;EACxB;EACA,IAAI,MAAM,EAAE,GAAG,KAAI;EACnB,IAAI,OAAO,CAAC,GAAG,CAAC,EAAE,EAAC;EACnB,IAAI,EAAE,CAAC,QAAQ,GAAG,QAAO;EACzB;EACA,IAAI,SAAS,CAAC,EAAE,EAAC;EACjB,IAAG;EACH;;ECbA;AAEA;AACA;EACA,SAAS,GAAG,EAAE,OAAO,EAAE;EACvB;EACA,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAC;EACrB,CAAC;EACD;EACA,SAAS,CAAC,GAAG,EAAC;;;;;;;;"}